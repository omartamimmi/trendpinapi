{
    "sourceFile": "docker/development/web/Dockerfile",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 11,
            "patches": [
                {
                    "date": 1758368951315,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1758371732462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,12 @@\n FROM php:8.1-fpm\n \n # Set PHP configuration for file uploads\n-RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n-    echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n+# RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n+#     echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n \n-RUN echo \"memory_limit = 512M\" >> /usr/local/etc/php/conf.d/custom.ini \\\n-    echo \"max_execution_time = 300\" >> /usr/local/etc/php/conf.d/custom.ini\n+# RUN echo \"memory_limit = 512M\" >> /usr/local/etc/php/conf.d/custom.ini \\\n+#     echo \"max_execution_time = 300\" >> /usr/local/etc/php/conf.d/custom.ini\n \n # Install necessary packages and dependencies\n RUN apt-get update && apt-get install -y unzip libzip-dev \\\n     curl \\\n"
                },
                {
                    "date": 1743118198243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-FROM php:8.1-fpm\n+FROM php:8.2-fpm\n \n # Set PHP configuration for file uploads\n # RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n #     echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n"
                },
                {
                    "date": 1743118255855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n \n # Install necessary packages and dependencies\n RUN apt-get update && apt-get install -y unzip libzip-dev \\\n     curl \\\n-    gnupg2 \\\n+    # gnupg2 \\\n     unixodbc-dev \\\n     libssl-dev \\\n     librdkafka-dev \\\n     gcc \\\n"
                },
                {
                    "date": 1743118289102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,17 @@\n FROM php:8.2-fpm\n \n # Set PHP configuration for file uploads\n-# RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n-#     echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n+RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n+    echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n \n-# RUN echo \"memory_limit = 512M\" >> /usr/local/etc/php/conf.d/custom.ini \\\n-#     echo \"max_execution_time = 300\" >> /usr/local/etc/php/conf.d/custom.ini\n+RUN echo \"memory_limit = 512M\" >> /usr/local/etc/php/conf.d/custom.ini \\\n+    echo \"max_execution_time = 300\" >> /usr/local/etc/php/conf.d/custom.ini\n \n # Install necessary packages and dependencies\n RUN apt-get update && apt-get install -y unzip libzip-dev \\\n     curl \\\n-    # gnupg2 \\\n+    gnupg2 \\\n     unixodbc-dev \\\n     libssl-dev \\\n     librdkafka-dev \\\n     gcc \\\n"
                },
                {
                    "date": 1743118313962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,12 @@\n FROM php:8.2-fpm\n \n # Set PHP configuration for file uploads\n-RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n-    echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n+# RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n+#     echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n \n-RUN echo \"memory_limit = 512M\" >> /usr/local/etc/php/conf.d/custom.ini \\\n-    echo \"max_execution_time = 300\" >> /usr/local/etc/php/conf.d/custom.ini\n+# RUN echo \"memory_limit = 512M\" >> /usr/local/etc/php/conf.d/custom.ini \\\n+#     echo \"max_execution_time = 300\" >> /usr/local/etc/php/conf.d/custom.ini\n \n # Install necessary packages and dependencies\n RUN apt-get update && apt-get install -y unzip libzip-dev \\\n     curl \\\n"
                },
                {
                    "date": 1760097030625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-FROM php:8.2-fpm\n+FROM php:8.1-fpm\n \n # Set PHP configuration for file uploads\n # RUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n #     echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n@@ -105,9 +105,9 @@\n # Copy application files\n COPY . /var/www/html\n \n # Expose port 9000\n-EXPOSE 9001\n+# EXPOSE 9001\n \n ENTRYPOINT [\"docker-php-entrypoint\"]\n \n # Set the command to run PHP-FPM\n"
                },
                {
                    "date": 1760098246051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,5 +110,6 @@\n \n ENTRYPOINT [\"docker-php-entrypoint\"]\n \n # Set the command to run PHP-FPM\n-CMD [\"php-fpm\"]\n+RUN docker-php-ext-install pdo pdo_mysql\n+CMD [\"php-fpm\", \"-F\"]   # FPM will listen on 9000 inside the container\n"
                },
                {
                    "date": 1760099243634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,8 +106,10 @@\n COPY . /var/www/html\n \n # Expose port 9000\n # EXPOSE 9001\n+# Ensure PHP-FPM listens on TCP port 9000\n+RUN sed -i \"s|^listen = .*|listen = 0.0.0.0:9000|\" /usr/local/etc/php-fpm.d/www.conf\n \n ENTRYPOINT [\"docker-php-entrypoint\"]\n \n # Set the command to run PHP-FPM\n"
                },
                {
                    "date": 1760099300187,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,9 +107,8 @@\n \n # Expose port 9000\n # EXPOSE 9001\n # Ensure PHP-FPM listens on TCP port 9000\n-RUN sed -i \"s|^listen = .*|listen = 0.0.0.0:9000|\" /usr/local/etc/php-fpm.d/www.conf\n \n ENTRYPOINT [\"docker-php-entrypoint\"]\n \n # Set the command to run PHP-FPM\n"
                },
                {
                    "date": 1760099305574,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,8 +65,9 @@\n # Install Composer\n RUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" && \\\n     php composer-setup.php --install-dir=/usr/local/bin --filename=composer && \\\n     php -r \"unlink('composer-setup.php');\"\n+RUN sed -i \"s|^listen = .*|listen = 0.0.0.0:9000|\" /usr/local/etc/php-fpm.d/www.conf\n \n # Install Node.js and other utilities\n #RUN apt-get install -y nodejs zip unzip vim\n \n"
                },
                {
                    "date": 1760099316199,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,10 +65,10 @@\n # Install Composer\n RUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" && \\\n     php composer-setup.php --install-dir=/usr/local/bin --filename=composer && \\\n     php -r \"unlink('composer-setup.php');\"\n-RUN sed -i \"s|^listen = .*|listen = 0.0.0.0:9000|\" /usr/local/etc/php-fpm.d/www.conf\n \n+    \n # Install Node.js and other utilities\n #RUN apt-get install -y nodejs zip unzip vim\n \n # Add the cron job definition\n"
                }
            ],
            "date": 1758368951315,
            "name": "Commit-0",
            "content": "FROM php:8.1-fpm\n\n# Set PHP configuration for file uploads\nRUN echo \"post_max_size=20M\" >> /usr/local/etc/php/conf.d/custom.ini && \\\n    echo \"upload_max_filesize=20M\" >> /usr/local/etc/php/conf.d/custom.ini\n\nRUN echo \"memory_limit = 512M\" >> /usr/local/etc/php/conf.d/custom.ini \\\n    echo \"max_execution_time = 300\" >> /usr/local/etc/php/conf.d/custom.ini\n\n# Install necessary packages and dependencies\nRUN apt-get update && apt-get install -y unzip libzip-dev \\\n    curl \\\n    gnupg2 \\\n    unixodbc-dev \\\n    libssl-dev \\\n    librdkafka-dev \\\n    gcc \\\n    make \\\n    autoconf \\\n    bzip2 \\\n    zlib1g-dev \\\n    && rm -rf /var/lib/apt/lists/* \n\n# Add Microsoft repository for SQL Server\nRUN curl https://packages.microsoft.com/keys/microsoft.asc | tee /etc/apt/trusted.gpg.d/microsoft.asc \\\n    && curl https://packages.microsoft.com/config/ubuntu/20.04/prod.list > /etc/apt/sources.list.d/mssql-release.list \\\n    && apt-get update\n\n# Install the Microsoft ODBC Driver for SQL Server\nRUN ACCEPT_EULA=Y apt-get install -y msodbcsql17 \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Install PHP SQL Server extensions\nRUN pecl install pdo_sqlsrv sqlsrv \\\n    && docker-php-ext-enable pdo_sqlsrv sqlsrv \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Install MySQL\nRUN docker-php-ext-install pdo pdo_mysql\n\n# Install the rdkafka PHP extension\nRUN pecl install rdkafka \\\n    && docker-php-ext-enable rdkafka \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/*\n\nRUN apt-get update && apt-get install -y python3 python3-pip\nRUN apt-get install -y supervisor\n\nRUN apt-get update && apt-get install -y libpng-dev libjpeg-dev libfreetype6-dev \\\n    && docker-php-ext-configure gd --with-freetype --with-jpeg \\\n    && docker-php-ext-install gd\n\nRUN apt-get update && apt-get install -y \\\n    libmagickwand-dev --no-install-recommends \\\n    && pecl install imagick \\\n    && docker-php-ext-enable imagick\n\n\n# Install PHP zip extension\nRUN docker-php-ext-install zip\n\n# Install Composer\nRUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" && \\\n    php composer-setup.php --install-dir=/usr/local/bin --filename=composer && \\\n    php -r \"unlink('composer-setup.php');\"\n\n# Install Node.js and other utilities\n#RUN apt-get install -y nodejs zip unzip vim\n\n# Add the cron job definition\n#COPY ./docker/crontab /etc/cron.d/laravel-cron\n\n# Give the cron file proper permissions\n#RUN chmod 0644 /etc/cron.d/laravel-cron\n\n# Apply cron job and run cron in the background\n#RUN crontab /etc/cron.d/laravel-cron\n\n# Install pcntl and other necessary extensions\nRUN docker-php-ext-install pcntl\n\n# Install necessary tools and Redis extension\nRUN apt-get update && apt-get install -y \\\n    libz-dev \\\n    libcurl4-openssl-dev \\\n    && pecl install redis \\\n    && docker-php-ext-enable redis\n\n# Install Node.js and npm\nRUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \\\n    && apt-get install -y nodejs \\\n    && npm install -g npm@latest\n\nRUN npm install -g vite\n\n# RUN chown -R www-data:www-data /var/www/html/storage\n\n# RUN chown -R www-data:www-data /var/www/html/bootstrap\n# Set working directory\nWORKDIR /var/www/html\n\n# Copy application files\nCOPY . /var/www/html\n\n# Expose port 9000\nEXPOSE 9001\n\nENTRYPOINT [\"docker-php-entrypoint\"]\n\n# Set the command to run PHP-FPM\nCMD [\"php-fpm\"]\n"
        }
    ]
}