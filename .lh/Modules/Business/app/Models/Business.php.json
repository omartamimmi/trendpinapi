{
    "sourceFile": "Modules/Business/app/Models/Business.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1758902780953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1758905181356,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,11 @@\n \n     /**\n      * The attributes that are mass assignable.\n      */\n-    protected $fillable = [];\n+    protected $fillable = [\n+        'retailer_name'\n+    ];\n \n     // protected static function newFactory(): BusinessFactory\n     // {\n     //     // return BusinessFactory::new();\n"
                },
                {
                    "date": 1758905341385,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,5 +20,49 @@\n     // protected static function newFactory(): BusinessFactory\n     // {\n     //     // return BusinessFactory::new();\n     // }\n+\n+     protected $slugField     = 'slug';\n+    protected $slugFromField = 'title';\n+\n+    public function save(array $options = [])\n+    {\n+        if ($this->create_user) {\n+            $this->update_user = Auth::id();\n+        } else {\n+            $this->create_user = Auth::id();\n+        }\n+        if ($this->slugField && $this->slugFromField) {\n+            $slugField = $this->slugField;\n+            $this->$slugField = $this->generateSlug($this->$slugField);\n+        }\n+        // dd($options);\n+        return parent::save($options); // TODO: Change the autogenerated stub\n+    }\n+\n+    public function generateSlug($string = false, $count = 0)\n+    {\n+        $slugFromField = $this->slugFromField;\n+        if (empty($string))\n+            $string = $this->$slugFromField;\n+        $slug = $newSlug = $this->strToSlug($string);\n+        $newSlug = $slug . ($count ? '-' . $count : '');\n+        $model = static::select('count(id)');\n+        if ($this->id) {\n+            $model->where('id', '<>', $this->id);\n+        }\n+        $check = $model->where($this->slugField, $newSlug)->count();\n+        if (!empty($check)) {\n+            return $this->generateSlug($slug, $count + 1);\n+        }\n+        return $newSlug;\n+    }\n+\n+    protected function strToSlug($string) {\n+        $slug = Str::slug($string);\n+        if(empty($slug)){\n+            $slug = preg_replace('/\\s+/u', '-', trim($string));\n+        }\n+        return $slug;\n+    }\n }\n"
                },
                {
                    "date": 1758905349176,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n <?php\n \n namespace Modules\\Business\\app\\Models;\n \n+use Illuminate\\Container\\Attributes\\Auth;\n use Illuminate\\Database\\Eloquent\\Model;\n use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n // use Modules\\Business\\Database\\Factories\\BusinessFactory;\n \n@@ -21,9 +22,9 @@\n     // {\n     //     // return BusinessFactory::new();\n     // }\n \n-     protected $slugField     = 'slug';\n+    protected $slugField     = 'slug';\n     protected $slugFromField = 'title';\n \n     public function save(array $options = [])\n     {\n"
                },
                {
                    "date": 1758905354310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,12 @@\n <?php\n \n namespace Modules\\Business\\app\\Models;\n \n-use Illuminate\\Container\\Attributes\\Auth;\n use Illuminate\\Database\\Eloquent\\Model;\n use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n+use Illuminate\\Support\\Facades\\Auth;\n+\n // use Modules\\Business\\Database\\Factories\\BusinessFactory;\n \n class Business extends Model\n {\n"
                },
                {
                    "date": 1758905377313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     //     // return BusinessFactory::new();\n     // }\n \n     protected $slugField     = 'slug';\n-    protected $slugFromField = 'title';\n+    protected $slugFromField = 'retailer_name';\n \n     public function save(array $options = [])\n     {\n         if ($this->create_user) {\n"
                },
                {
                    "date": 1758905397305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n \n use Illuminate\\Database\\Eloquent\\Model;\n use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n use Illuminate\\Support\\Facades\\Auth;\n+use Illuminate\\Support\\Str;\n \n // use Modules\\Business\\Database\\Factories\\BusinessFactory;\n \n class Business extends Model\n"
                },
                {
                    "date": 1758905473657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,10 @@\n     /**\n      * The attributes that are mass assignable.\n      */\n     protected $fillable = [\n-        'retailer_name'\n+        'retailer_name',\n+        'email'\n     ];\n \n     // protected static function newFactory(): BusinessFactory\n     // {\n"
                },
                {
                    "date": 1759653709558,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,73 @@\n+<?php\n+\n+namespace Modules\\Business\\app\\Models;\n+\n+use Illuminate\\Database\\Eloquent\\Model;\n+use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n+use Illuminate\\Support\\Facades\\Auth;\n+use Illuminate\\Support\\Str;\n+\n+// use Modules\\Business\\Database\\Factories\\BusinessFactory;\n+\n+class Business extends Model\n+{\n+    use HasFactory;\n+\n+    /**\n+     * The attributes that are mass assignable.\n+     */\n+    protected $fillable = [\n+        'retailer_name',\n+        'email'\n+    ];\n+\n+    // protected static function newFactory(): BusinessFactory\n+    // {\n+    //     // return BusinessFactory::new();\n+    // }\n+\n+    protected $slugField     = 'slug';\n+    protected $slugFromField = 'retailer_name';\n+\n+    public function save(array $options = [])\n+    {\n+        \n+        if ($this->create_user) {\n+            $this->update_user = Auth::id();\n+        } else {\n+            $this->create_user = Auth::id();\n+        }\n+        if ($this->slugField && $this->slugFromField) {\n+            $slugField = $this->slugField;\n+            $this->$slugField = $this->generateSlug($this->$slugField);\n+        }\n+        // dd($options);\n+        return parent::save($options); // TODO: Change the autogenerated stub\n+    }\n+\n+    public function generateSlug($string = false, $count = 0)\n+    {\n+        $slugFromField = $this->slugFromField;\n+        if (empty($string))\n+            $string = $this->$slugFromField;\n+        $slug = $newSlug = $this->strToSlug($string);\n+        $newSlug = $slug . ($count ? '-' . $count : '');\n+        $model = static::select('count(id)');\n+        if ($this->id) {\n+            $model->where('id', '<>', $this->id);\n+        }\n+        $check = $model->where($this->slugField, $newSlug)->count();\n+        if (!empty($check)) {\n+            return $this->generateSlug($slug, $count + 1);\n+        }\n+        return $newSlug;\n+    }\n+\n+    protected function strToSlug($string) {\n+        $slug = Str::slug($string);\n+        if(empty($slug)){\n+            $slug = preg_replace('/\\s+/u', '-', trim($string));\n+        }\n+        return $slug;\n+    }\n+}\n"
                },
                {
                    "date": 1759653715379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n     protected $slugFromField = 'retailer_name';\n \n     public function save(array $options = [])\n     {\n-        \n+        dd($)\n         if ($this->create_user) {\n             $this->update_user = Auth::id();\n         } else {\n             $this->create_user = Auth::id();\n@@ -70,76 +70,4 @@\n         }\n         return $slug;\n     }\n }\n-<?php\n-\n-namespace Modules\\Business\\app\\Models;\n-\n-use Illuminate\\Database\\Eloquent\\Model;\n-use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n-use Illuminate\\Support\\Facades\\Auth;\n-use Illuminate\\Support\\Str;\n-\n-// use Modules\\Business\\Database\\Factories\\BusinessFactory;\n-\n-class Business extends Model\n-{\n-    use HasFactory;\n-\n-    /**\n-     * The attributes that are mass assignable.\n-     */\n-    protected $fillable = [\n-        'retailer_name',\n-        'email'\n-    ];\n-\n-    // protected static function newFactory(): BusinessFactory\n-    // {\n-    //     // return BusinessFactory::new();\n-    // }\n-\n-    protected $slugField     = 'slug';\n-    protected $slugFromField = 'retailer_name';\n-\n-    public function save(array $options = [])\n-    {\n-        if ($this->create_user) {\n-            $this->update_user = Auth::id();\n-        } else {\n-            $this->create_user = Auth::id();\n-        }\n-        if ($this->slugField && $this->slugFromField) {\n-            $slugField = $this->slugField;\n-            $this->$slugField = $this->generateSlug($this->$slugField);\n-        }\n-        // dd($options);\n-        return parent::save($options); // TODO: Change the autogenerated stub\n-    }\n-\n-    public function generateSlug($string = false, $count = 0)\n-    {\n-        $slugFromField = $this->slugFromField;\n-        if (empty($string))\n-            $string = $this->$slugFromField;\n-        $slug = $newSlug = $this->strToSlug($string);\n-        $newSlug = $slug . ($count ? '-' . $count : '');\n-        $model = static::select('count(id)');\n-        if ($this->id) {\n-            $model->where('id', '<>', $this->id);\n-        }\n-        $check = $model->where($this->slugField, $newSlug)->count();\n-        if (!empty($check)) {\n-            return $this->generateSlug($slug, $count + 1);\n-        }\n-        return $newSlug;\n-    }\n-\n-    protected function strToSlug($string) {\n-        $slug = Str::slug($string);\n-        if(empty($slug)){\n-            $slug = preg_replace('/\\s+/u', '-', trim($string));\n-        }\n-        return $slug;\n-    }\n-}\n"
                },
                {
                    "date": 1759653737883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,8 @@\n     protected $slugFromField = 'retailer_name';\n \n     public function save(array $options = [])\n     {\n-        dd($)\n         if ($this->create_user) {\n             $this->update_user = Auth::id();\n         } else {\n             $this->create_user = Auth::id();\n"
                },
                {
                    "date": 1759691527739,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,5 +68,14 @@\n             $slug = preg_replace('/\\s+/u', '-', trim($string));\n         }\n         return $slug;\n     }\n+\n+    public function groups() {\n+    return $this->hasMany(Group::class);\n }\n+\n+public function brands() {\n+    return $this->hasMany(Brand::class);\n+}\n+\n+}\n"
                },
                {
                    "date": 1759857245651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,91 @@\n+<?php\n+\n+namespace Modules\\Business\\app\\Models;\n+\n+use Illuminate\\Database\\Eloquent\\Model;\n+use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n+use Illuminate\\Support\\Facades\\Auth;\n+use Illuminate\\Support\\Str;\n+\n+// use Modules\\Business\\Database\\Factories\\BusinessFactory;\n+\n+class Business extends Model\n+{\n+    use HasFactory;\n+\n+    /**\n+     * The attributes that are mass assignable.\n+     */\n+    protected $fillable = [\n+        'retailer_name',\n+        'email'\n+    ];\n+\n+               $table->string('slug')->unique();\n+            $table->string('retailer_name')->nullable();  // Retailer Name\n+            $table->string('retailer_email')->unique();\n+            $table->string('phone_number')->nullable();\n+            $table->enum('business_type', ['single', 'group'])->default('single'); // business structure\n+            $table->string('license_file')->nullable();\n+            $table->string('logo')->nullable();  // Logo (path)\n+            $table->string('status')->default('draft');  \n+            $table->enum('operation_type', ['in_person', 'online', 'hybrid'])->default('in_person'); // service type  \n+            $table->dateTime('publish_date')->nullable();\n+    // protected static function newFactory(): BusinessFactory\n+    // {\n+    //     // return BusinessFactory::new();\n+    // }\n+\n+    protected $slugField     = 'slug';\n+    protected $slugFromField = 'retailer_name';\n+\n+    public function save(array $options = [])\n+    {\n+        if ($this->create_user) {\n+            $this->update_user = Auth::id();\n+        } else {\n+            $this->create_user = Auth::id();\n+        }\n+        if ($this->slugField && $this->slugFromField) {\n+            $slugField = $this->slugField;\n+            $this->$slugField = $this->generateSlug($this->$slugField);\n+        }\n+        // dd($options);\n+        return parent::save($options); // TODO: Change the autogenerated stub\n+    }\n+\n+    public function generateSlug($string = false, $count = 0)\n+    {\n+        $slugFromField = $this->slugFromField;\n+        if (empty($string))\n+            $string = $this->$slugFromField;\n+        $slug = $newSlug = $this->strToSlug($string);\n+        $newSlug = $slug . ($count ? '-' . $count : '');\n+        $model = static::select('count(id)');\n+        if ($this->id) {\n+            $model->where('id', '<>', $this->id);\n+        }\n+        $check = $model->where($this->slugField, $newSlug)->count();\n+        if (!empty($check)) {\n+            return $this->generateSlug($slug, $count + 1);\n+        }\n+        return $newSlug;\n+    }\n+\n+    protected function strToSlug($string) {\n+        $slug = Str::slug($string);\n+        if(empty($slug)){\n+            $slug = preg_replace('/\\s+/u', '-', trim($string));\n+        }\n+        return $slug;\n+    }\n+\n+    public function groups() {\n+        return $this->hasMany(Group::class);\n+    }\n+\n+    public function brands() {\n+        return $this->hasMany(Brand::class);\n+    }\n+\n+}\n"
                },
                {
                    "date": 1759857251983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,10 @@\n      * The attributes that are mass assignable.\n      */\n     protected $fillable = [\n         'retailer_name',\n-        'email'\n+        'retailer_email',\n+        ''\n     ];\n \n                $table->string('slug')->unique();\n             $table->string('retailer_name')->nullable();  // Retailer Name\n@@ -88,85 +89,4 @@\n         return $this->hasMany(Brand::class);\n     }\n \n }\n-<?php\n-\n-namespace Modules\\Business\\app\\Models;\n-\n-use Illuminate\\Database\\Eloquent\\Model;\n-use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n-use Illuminate\\Support\\Facades\\Auth;\n-use Illuminate\\Support\\Str;\n-\n-// use Modules\\Business\\Database\\Factories\\BusinessFactory;\n-\n-class Business extends Model\n-{\n-    use HasFactory;\n-\n-    /**\n-     * The attributes that are mass assignable.\n-     */\n-    protected $fillable = [\n-        'retailer_name',\n-        'email'\n-    ];\n-\n-    // protected static function newFactory(): BusinessFactory\n-    // {\n-    //     // return BusinessFactory::new();\n-    // }\n-\n-    protected $slugField     = 'slug';\n-    protected $slugFromField = 'retailer_name';\n-\n-    public function save(array $options = [])\n-    {\n-        if ($this->create_user) {\n-            $this->update_user = Auth::id();\n-        } else {\n-            $this->create_user = Auth::id();\n-        }\n-        if ($this->slugField && $this->slugFromField) {\n-            $slugField = $this->slugField;\n-            $this->$slugField = $this->generateSlug($this->$slugField);\n-        }\n-        // dd($options);\n-        return parent::save($options); // TODO: Change the autogenerated stub\n-    }\n-\n-    public function generateSlug($string = false, $count = 0)\n-    {\n-        $slugFromField = $this->slugFromField;\n-        if (empty($string))\n-            $string = $this->$slugFromField;\n-        $slug = $newSlug = $this->strToSlug($string);\n-        $newSlug = $slug . ($count ? '-' . $count : '');\n-        $model = static::select('count(id)');\n-        if ($this->id) {\n-            $model->where('id', '<>', $this->id);\n-        }\n-        $check = $model->where($this->slugField, $newSlug)->count();\n-        if (!empty($check)) {\n-            return $this->generateSlug($slug, $count + 1);\n-        }\n-        return $newSlug;\n-    }\n-\n-    protected function strToSlug($string) {\n-        $slug = Str::slug($string);\n-        if(empty($slug)){\n-            $slug = preg_replace('/\\s+/u', '-', trim($string));\n-        }\n-        return $slug;\n-    }\n-\n-    public function groups() {\n-    return $this->hasMany(Group::class);\n-}\n-\n-public function brands() {\n-    return $this->hasMany(Brand::class);\n-}\n-\n-}\n"
                },
                {
                    "date": 1759857259240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,10 @@\n      */\n     protected $fillable = [\n         'retailer_name',\n         'retailer_email',\n-        ''\n+        'phone_number',\n+        'business_type'\n     ];\n \n                $table->string('slug')->unique();\n             $table->string('retailer_name')->nullable();  // Retailer Name\n"
                },
                {
                    "date": 1759857265190,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,11 @@\n     protected $fillable = [\n         'retailer_name',\n         'retailer_email',\n         'phone_number',\n-        'business_type'\n+        'business_type',\n+        'license_file',\n+        \n     ];\n \n                $table->string('slug')->unique();\n             $table->string('retailer_name')->nullable();  // Retailer Name\n"
                },
                {
                    "date": 1759857271218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n         'retailer_email',\n         'phone_number',\n         'business_type',\n         'license_file',\n-        \n+        'logo'\n     ];\n \n                $table->string('slug')->unique();\n             $table->string('retailer_name')->nullable();  // Retailer Name\n"
                },
                {
                    "date": 1759857277656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,10 @@\n         'retailer_email',\n         'phone_number',\n         'business_type',\n         'license_file',\n-        'logo'\n+        'logo',\n+        'status'\n     ];\n \n                $table->string('slug')->unique();\n             $table->string('retailer_name')->nullable();  // Retailer Name\n"
                },
                {
                    "date": 1759857286796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,10 @@\n         'phone_number',\n         'business_type',\n         'license_file',\n         'logo',\n-        'status'\n+        'status',\n+        'operation_type'\n     ];\n \n                $table->string('slug')->unique();\n             $table->string('retailer_name')->nullable();  // Retailer Name\n"
                },
                {
                    "date": 1759857294374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,25 +23,12 @@\n         'business_type',\n         'license_file',\n         'logo',\n         'status',\n-        'operation_type'\n+        'operation_type',\n+        ''\n     ];\n \n-               $table->string('slug')->unique();\n-            $table->string('retailer_name')->nullable();  // Retailer Name\n-            $table->string('retailer_email')->unique();\n-            $table->string('phone_number')->nullable();\n-            $table->enum('business_type', ['single', 'group'])->default('single'); // business structure\n-            $table->string('license_file')->nullable();\n-            $table->string('logo')->nullable();  // Logo (path)\n-            $table->string('status')->default('draft');  \n-            $table->enum('operation_type', ['in_person', 'online', 'hybrid'])->default('in_person'); // service type  \n-            $table->dateTime('publish_date')->nullable();\n-    // protected static function newFactory(): BusinessFactory\n-    // {\n-    //     // return BusinessFactory::new();\n-    // }\n \n     protected $slugField     = 'slug';\n     protected $slugFromField = 'retailer_name';\n \n"
                },
                {
                    "date": 1759857318031,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,13 +23,11 @@\n         'business_type',\n         'license_file',\n         'logo',\n         'status',\n-        'operation_type',\n-        ''\n-    ];\n+        'operation_type'\n+        ];\n \n-\n     protected $slugField     = 'slug';\n     protected $slugFromField = 'retailer_name';\n \n     public function save(array $options = [])\n"
                },
                {
                    "date": 1759858939054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n         'license_file',\n         'logo',\n         'status',\n         'operation_type'\n-        ];\n+    ];\n \n     protected $slugField     = 'slug';\n     protected $slugFromField = 'retailer_name';\n \n@@ -40,9 +40,8 @@\n         if ($this->slugField && $this->slugFromField) {\n             $slugField = $this->slugField;\n             $this->$slugField = $this->generateSlug($this->$slugField);\n         }\n-        // dd($options);\n         return parent::save($options); // TODO: Change the autogenerated stub\n     }\n \n     public function generateSlug($string = false, $count = 0)\n"
                }
            ],
            "date": 1758902780953,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace Modules\\Business\\app\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n// use Modules\\Business\\Database\\Factories\\BusinessFactory;\n\nclass Business extends Model\n{\n    use HasFactory;\n\n    /**\n     * The attributes that are mass assignable.\n     */\n    protected $fillable = [];\n\n    // protected static function newFactory(): BusinessFactory\n    // {\n    //     // return BusinessFactory::new();\n    // }\n}\n"
        }
    ]
}