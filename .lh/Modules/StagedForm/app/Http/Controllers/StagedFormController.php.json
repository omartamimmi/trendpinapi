{
    "sourceFile": "Modules/StagedForm/app/Http/Controllers/StagedFormController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 135,
            "patches": [
                {
                    "date": 1758615395967,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1758615401655,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n namespace Modules\\StagedForm\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n use Illuminate\\Http\\Request;\n+use Modules\\StagedForm\\Services\\StagedFormService;\n \n class StagedFormController extends Controller\n {\n     public function __construct(private StagedFormService $service) {}\n"
                },
                {
                    "date": 1758615476433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,30 @@\n class StagedFormController extends Controller\n {\n     public function __construct(private StagedFormService $service) {}\n \n+        /**\n+     * Saas pending user registration step 1\n+     *\n+     * @group SaaS\n+     * @subgroup Pending Users\n+     *\n+     * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n+     */\n+    public function step1(Step1Request $request, StagedFormPersistence $stagedFormPersistenceService)\n+    {\n+        $stagedFormPersistenceService\n+            ->setInput('submitted_form', $request->validated())\n+            ->setInput('stage_id', $request->get('stage_id'))\n+            ->setInput('stage_type', 'saas_curator_registration')\n+            ->setInput('step', '1')\n+            ->createContact($request->get('email'))\n+            ->saveForm()\n+            ->collectOutput('stagedForm', $stagedForm);\n+\n+        return new StagedForm($stagedForm);\n+    }\n+\n     public function getStagedFormsByUserId(Request $request)\n     {\n         $stagedForm = $this->service\n             ->setAuthUser($request->user())\n"
                },
                {
                    "date": 1758615484897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,17 +9,17 @@\n class StagedFormController extends Controller\n {\n     public function __construct(private StagedFormService $service) {}\n \n-        /**\n+    /**\n      * Saas pending user registration step 1\n      *\n      * @group SaaS\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function step1(Step1Request $request, StagedFormPersistence $stagedFormPersistenceService)\n+    public function step(Step1Request $request, StagedFormPersistence $stagedFormPersistenceService)\n     {\n         $stagedFormPersistenceService\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758615493571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function step(Step1Request $request, StagedFormPersistence $stagedFormPersistenceService)\n+    public function step(Request $request, StagedFormPersistence $stagedFormPersistenceService)\n     {\n         $stagedFormPersistenceService\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758615504951,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function step(Request $request, StagedFormPersistence $stagedFormPersistenceService)\n+    public function step(Request $request)\n     {\n         $stagedFormPersistenceService\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758615515744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function step(Request $request)\n     {\n-        $stagedFormPersistenceService\n+        $this\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n             ->setInput('step', '1')\n"
                },
                {
                    "date": 1758615523540,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,14 +19,14 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function step(Request $request)\n     {\n-        $this\n+        $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n             ->setInput('step', '1')\n-            ->createContact($request->get('email'))\n+            // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n \n         return new StagedForm($stagedForm);\n"
                },
                {
                    "date": 1758615528738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n \n-        return new StagedForm($stagedForm);\n+        // return new StagedForm($stagedForm);\n     }\n \n     public function getStagedFormsByUserId(Request $request)\n     {\n"
                },
                {
                    "date": 1758615637608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n namespace Modules\\StagedForm\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n use Illuminate\\Http\\Request;\n+use Modules\\StagedForm\\app\\Http\\Requests\\StepRequest;\n use Modules\\StagedForm\\Services\\StagedFormService;\n \n class StagedFormController extends Controller\n {\n@@ -17,9 +18,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function step(Request $request)\n+    public function step(StepRequest $request)\n     {\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758615960164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n <?php\n \n-namespace Modules\\StagedForm\\Http\\Controllers;\n+namespace Modules\\StagedForm\\app\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n use Illuminate\\Http\\Request;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepRequest;\n@@ -29,9 +29,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n \n-        // return new StagedForm($stagedForm);\n+        return new StagedForm($stagedForm);\n     }\n \n     public function getStagedFormsByUserId(Request $request)\n     {\n"
                },
                {
                    "date": 1758616341288,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function step(StepRequest $request)\n+    public function create(StepRequest $request)\n     {\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758616420918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,8 +32,30 @@\n \n         return new StagedForm($stagedForm);\n     }\n \n+    /**\n+     * Saas pending user registration step 1\n+     *\n+     * @group SaaS\n+     * @subgroup Pending Users\n+     *\n+     * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n+     */\n+    public function create(StepRequest $request)\n+    {\n+        $this->service\n+            ->setInput('submitted_form', $request->validated())\n+            ->setInput('stage_id', $request->get('stage_id'))\n+            ->setInput('stage_type', 'saas_curator_registration')\n+            ->setInput('step', '1')\n+            // ->createContact($request->get('email'))\n+            ->saveForm()\n+            ->collectOutput('stagedForm', $stagedForm);\n+\n+        return new StagedForm($stagedForm);\n+    }\n+\n     public function getStagedFormsByUserId(Request $request)\n     {\n         $stagedForm = $this->service\n             ->setAuthUser($request->user())\n"
                },
                {
                    "date": 1758616428602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,30 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n+    public function get(StepRequest $request)\n+    {\n+        $this->service\n+            ->setInput('submitted_form', $request->validated())\n+            ->setInput('stage_id', $request->get('stage_id'))\n+            ->setInput('stage_type', 'saas_curator_registration')\n+            ->setInput('step', '1')\n+            // ->createContact($request->get('email'))\n+            ->saveForm()\n+            ->collectOutput('stagedForm', $stagedForm);\n+\n+        return new StagedForm($stagedForm);\n+    }\n+\n+    /**\n+     * Saas pending user registration step 1\n+     *\n+     * @group SaaS\n+     * @subgroup Pending Users\n+     *\n+     * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n+     */\n     public function create(StepRequest $request)\n     {\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n"
                },
                {
                    "date": 1758619273471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n namespace Modules\\StagedForm\\app\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n use Illuminate\\Http\\Request;\n-use Modules\\StagedForm\\app\\Http\\Requests\\StepRequest;\n+use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Services\\StagedFormService;\n \n class StagedFormController extends Controller\n {\n@@ -18,9 +18,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function get(StepRequest $request)\n+    public function get(StepStoreRequest $request)\n     {\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n@@ -40,9 +40,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function create(StepRequest $request)\n+    public function create(StepStoreRequest $request)\n     {\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n@@ -62,9 +62,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function create(StepRequest $request)\n+    public function update(StepStoreRequest $request)\n     {\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758619292749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function get(StepStoreRequest $request)\n+    public function get($id)\n     {\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758619298952,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,11 +21,11 @@\n      */\n     public function get($id)\n     {\n         $this->service\n-            ->setInput('submitted_form', $request->validated())\n-            ->setInput('stage_id', $request->get('stage_id'))\n-            ->setInput('stage_type', 'saas_curator_registration')\n+            // ->setInput('submitted_form', $request->validated())\n+            // ->setInput('stage_id', $request->get('stage_id'))\n+            // ->setInput('stage_type', 'saas_curator_registration')\n             ->setInput('step', '1')\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n"
                },
                {
                    "date": 1758619305552,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n             ->setInput('step', '1')\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n-\n+dd($stagedForm);\n         return new StagedForm($stagedForm);\n     }\n \n     /**\n"
                },
                {
                    "date": 1758619316014,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n \n-        return new StagedForm($stagedForm);\n+        // return new StagedForm($stagedForm);\n     }\n \n     /**\n      * Saas pending user registration step 1\n@@ -51,9 +51,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n dd($stagedForm);\n-        return new StagedForm($stagedForm);\n+        // return new StagedForm($stagedForm);\n     }\n \n     /**\n      * Saas pending user registration step 1\n@@ -73,9 +73,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n \n-        return new StagedForm($stagedForm);\n+        // return new StagedForm($stagedForm);\n     }\n \n     public function getStagedFormsByUserId(Request $request)\n     {\n"
                },
                {
                    "date": 1758625336428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n+        dd($request);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758625444941,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request);\n+        dd($request->all());\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758625459597,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->all());\n+        dd($request->valida());\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758625544212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->valida());\n+        dd($request);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758625564424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request);\n+        dd($request->validated());\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758626382322,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->validated());\n+        dd($request);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758626391393,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request);\n+        dd($request->);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758626415712,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->);\n+        dd($request->validated());\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758626577307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->validated());\n+        dd($request->in());\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n"
                },
                {
                    "date": 1758626592982,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,14 +42,14 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->in());\n+        dd($request->input('step'));\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', 'saas_curator_registration')\n-            ->setInput('step', '1')\n+            ->setInput('step', $request->input('step'))\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n dd($stagedForm);\n"
                },
                {
                    "date": 1758626599138,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n         dd($request->input('step'));\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n-            ->setInput('stage_type', 'saas_curator_registration')\n+            ->setInput('stage_type', $request->input('step'))\n             ->setInput('step', $request->input('step'))\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n"
                },
                {
                    "date": 1758626615903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,15 +42,15 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->input('step'));\n+        // dd($request->input('step'));\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n-            ->setInput('stage_type', $request->input('step'))\n+            ->setInput('stage_type', $request->input('stage_type'))\n             ->setInput('step', $request->input('step'))\n-            // ->createContact($request->get('email'))\n+            ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n dd($stagedForm);\n         // return new StagedForm($stagedForm);\n"
                },
                {
                    "date": 1758626665968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,10 @@\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n             ->setInput('step', $request->input('step'))\n-            ->createContact($request->get('email'))\n+            ->ser\n+            // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n dd($stagedForm);\n         // return new StagedForm($stagedForm);\n"
                },
                {
                    "date": 1758626675541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,15 +42,15 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        // dd($request->input('step'));\n+        dd($request->input('step'));\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n             ->setInput('step', $request->input('step'))\n-            ->ser\n+            ->setAuthUser()\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n dd($stagedForm);\n"
                },
                {
                    "date": 1758626682223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request->input('step'));\n+        dd($request);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758626689152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd($request);\n+        dd(auth());\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758626706998,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd(auth());\n+        dd(auth()->user);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758626717895,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd(auth()->user);\n+        dd(auth(''));\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758626723308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd(auth(''));\n+        dd(Auth);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758626729537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n \n namespace Modules\\StagedForm\\app\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n+use Illuminate\\Container\\Attributes\\Auth;\n use Illuminate\\Http\\Request;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Services\\StagedFormService;\n \n@@ -42,9 +43,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd(Auth);\n+        dd(Auth::user);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758626737146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,8 @@\n \n namespace Modules\\StagedForm\\app\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n-use Illuminate\\Container\\Attributes\\Auth;\n use Illuminate\\Http\\Request;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Services\\StagedFormService;\n \n@@ -43,9 +42,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd(Auth::user);\n+        dd(Auth);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758626750843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n namespace Modules\\StagedForm\\app\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Facades\\Auth;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Services\\StagedFormService;\n \n class StagedFormController extends Controller\n@@ -42,9 +43,8 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd(Auth);\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758629451671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,13 +48,13 @@\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n             ->setInput('step', $request->input('step'))\n-            ->setAuthUser()\n+            ->setAuthUser(Auth::user())\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n-dd($stagedForm);\n+// dd($stagedForm);\n         // return new StagedForm($stagedForm);\n     }\n \n     /**\n"
                },
                {
                    "date": 1758629457931,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n use App\\Http\\Controllers\\Controller;\n use Illuminate\\Http\\Request;\n use Illuminate\\Support\\Facades\\Auth;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n+use Modules\\StagedForm\\Models\\StagedForm;\n use Modules\\StagedForm\\Services\\StagedFormService;\n \n class StagedFormController extends Controller\n {\n@@ -53,9 +54,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n // dd($stagedForm);\n-        // return new StagedForm($stagedForm);\n+        return new StagedForm($stagedForm);\n     }\n \n     /**\n      * Saas pending user registration step 1\n"
                },
                {
                    "date": 1758629488971,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n             ->setAuthUser(Auth::user())\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n-// dd($stagedForm);\n+dd($stagedForm);\n         return new StagedForm($stagedForm);\n     }\n \n     /**\n"
                },
                {
                    "date": 1758629540214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n             ->setAuthUser(Auth::user())\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n-dd($stagedForm);\n+// dd($stagedForm);\n         return new StagedForm($stagedForm);\n     }\n \n     /**\n"
                },
                {
                    "date": 1758629546181,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n // dd($stagedForm);\n-        return new StagedForm($stagedForm);\n+        return js;\n     }\n \n     /**\n      * Saas pending user registration step 1\n"
                },
                {
                    "date": 1758629555679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n // dd($stagedForm);\n-        return js;\n+        return response()->json($stagedForm);\n     }\n \n     /**\n      * Saas pending user registration step 1\n"
                },
                {
                    "date": 1758629579062,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,8 @@\n             ->setAuthUser(Auth::user())\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n-// dd($stagedForm);\n         return response()->json($stagedForm);\n     }\n \n     /**\n"
                },
                {
                    "date": 1758629584218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,8 +53,9 @@\n             ->setAuthUser(Auth::user())\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n+\n         return response()->json($stagedForm);\n     }\n \n     /**\n"
                },
                {
                    "date": 1758629589359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,8 @@\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n             ->setInput('step', $request->input('step'))\n             ->setAuthUser(Auth::user())\n-            // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n \n         return response()->json($stagedForm);\n"
                },
                {
                    "date": 1758629595921,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,8 +44,11 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n+        try{\n+            \n+        }\n         $this->service\n             ->setInput('submitted_form', $request->validated())\n             ->setInput('stage_id', $request->get('stage_id'))\n             ->setInput('stage_type', $request->input('stage_type'))\n"
                },
                {
                    "date": 1758629604950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,20 +45,20 @@\n      */\n     public function create(StepStoreRequest $request)\n     {\n         try{\n-            \n+\n+            $this->service\n+                ->setInput('submitted_form', $request->validated())\n+                ->setInput('stage_id', $request->get('stage_id'))\n+                ->setInput('stage_type', $request->input('stage_type'))\n+                ->setInput('step', $request->input('step'))\n+                ->setAuthUser(Auth::user())\n+                ->saveForm()\n+                ->collectOutput('stagedForm', $stagedForm);\n+    \n+            return response()->json($stagedForm);\n         }\n-        $this->service\n-            ->setInput('submitted_form', $request->validated())\n-            ->setInput('stage_id', $request->get('stage_id'))\n-            ->setInput('stage_type', $request->input('stage_type'))\n-            ->setInput('step', $request->input('step'))\n-            ->setAuthUser(Auth::user())\n-            ->saveForm()\n-            ->collectOutput('stagedForm', $stagedForm);\n-\n-        return response()->json($stagedForm);\n     }\n \n     /**\n      * Saas pending user registration step 1\n"
                },
                {
                    "date": 1758629612149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,8 @@\n      */\n     public function create(StepStoreRequest $request)\n     {\n         try{\n-\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n                 ->setInput('stage_id', $request->get('stage_id'))\n                 ->setInput('stage_type', $request->input('stage_type'))\n@@ -56,9 +55,9 @@\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n-        }\n+        }catch()\n     }\n \n     /**\n      * Saas pending user registration step 1\n"
                },
                {
                    "date": 1758629634860,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n \n namespace Modules\\StagedForm\\app\\Http\\Controllers;\n \n use App\\Http\\Controllers\\Controller;\n+use Exception;\n use Illuminate\\Http\\Request;\n use Illuminate\\Support\\Facades\\Auth;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Models\\StagedForm;\n@@ -55,9 +56,9 @@\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n-        }catch()\n+        }catch(Exception $e)\n     }\n \n     /**\n      * Saas pending user registration step 1\n"
                },
                {
                    "date": 1758629653982,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,17 @@\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n-        }catch(Exception $e)\n+        }catch(Exception $e){\n+                        return response()->json([\n+                'error' => [\n+                    'name' => 'PublishedExperiencesLimit',\n+                    'message' => $e->getMessage(),\n+                    'code' => 400,\n+                ]\n+            ])->setStatusCode(400);\n+        }\n     }\n \n     /**\n      * Saas pending user registration step 1\n"
                },
                {
                    "date": 1758629660946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,11 +57,10 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Exception $e){\n-                        return response()->json([\n+            return response()->json([\n                 'error' => [\n-                    'name' => 'PublishedExperiencesLimit',\n                     'message' => $e->getMessage(),\n                     'code' => 400,\n                 ]\n             ])->setStatusCode(400);\n"
                },
                {
                    "date": 1758629668504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,9 +60,9 @@\n         }catch(Exception $e){\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n-                    'code' => 400,\n+                    'code' => $->,\n                 ]\n             ])->setStatusCode(400);\n         }\n     }\n"
                },
                {
                    "date": 1758629678179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,11 +60,11 @@\n         }catch(Exception $e){\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n-                    'code' => $->,\n+                    'code' => $e->getCode(),\n                 ]\n-            ])->setStatusCode(400);\n+            ])->setStatusCode($e->getCode());\n         }\n     }\n \n     /**\n"
                },
                {
                    "date": 1758629706800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n+        dd(123);\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n                 ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758629717355,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,8 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function create(StepStoreRequest $request)\n     {\n-        dd(123);\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n                 ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758629799537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,9 @@\n use Illuminate\\Support\\Facades\\Auth;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Models\\StagedForm;\n use Modules\\StagedForm\\Services\\StagedFormService;\n+use Throwable;\n \n class StagedFormController extends Controller\n {\n     public function __construct(private StagedFormService $service) {}\n@@ -56,9 +57,10 @@\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n-        }catch(Exception $e){\n+        }catch(Throwable $e){\n+            dd($e);\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758629816382,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            dd($e);\n+            // dd($e);\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758629831401,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,9 @@\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n                 ]\n-            ])->setStatusCode($e->getCode());\n+            ])->setStatusCode(500);\n         }\n     }\n \n     /**\n"
                },
                {
                    "date": 1758629910532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,8 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            // dd($e);\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758629982942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,8 +58,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n+            \n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758629988214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            \n+            $code = $e->getCode()\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758629994000,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            $code = $e->getCode()\n+            $code = ($e->getCode() !)\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758630000203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            $code = ($e->getCode() !)\n+            $code = ($e->getCode() != 0) ? $e->getCode()\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758630006323,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            $code = ($e->getCode() != 0) ? $e->getCode()\n+            $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n                     'code' => $e->getCode(),\n"
                },
                {
                    "date": 1758630015662,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,11 +62,11 @@\n             $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n             return response()->json([\n                 'error' => [\n                     'message' => $e->getMessage(),\n-                    'code' => $e->getCode(),\n+                    'code' => $code,\n                 ]\n-            ])->setStatusCode(500);\n+            ])->setStatusCode($code);\n         }\n     }\n \n     /**\n"
                },
                {
                    "date": 1758631312977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function create(StepStoreRequest $request)\n+    public function stoe(StepStoreRequest $request)\n     {\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n"
                },
                {
                    "date": 1758631359207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function stoe(StepStoreRequest $request)\n+    public function store(StepStoreRequest $request)\n     {\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n@@ -68,30 +68,8 @@\n             ])->setStatusCode($code);\n         }\n     }\n \n-    /**\n-     * Saas pending user registration step 1\n-     *\n-     * @group SaaS\n-     * @subgroup Pending Users\n-     *\n-     * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n-     */\n-    public function update(StepStoreRequest $request)\n-    {\n-        $this->service\n-            ->setInput('submitted_form', $request->validated())\n-            ->setInput('stage_id', $request->get('stage_id'))\n-            ->setInput('stage_type', 'saas_curator_registration')\n-            ->setInput('step', '1')\n-            // ->createContact($request->get('email'))\n-            ->saveForm()\n-            ->collectOutput('stagedForm', $stagedForm);\n-\n-        // return new StagedForm($stagedForm);\n-    }\n-\n     public function getStagedFormsByUserId(Request $request)\n     {\n         $stagedForm = $this->service\n             ->setAuthUser($request->user())\n"
                },
                {
                    "date": 1758631377198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n         // return new StagedForm($stagedForm);\n     }\n \n     /**\n-     * Saas pending user registration step 1\n+     * Store \n      *\n      * @group SaaS\n      * @subgroup Pending Users\n      *\n"
                },
                {
                    "date": 1758631423209,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,16 +36,20 @@\n \n         // return new StagedForm($stagedForm);\n     }\n \n-    /**\n-     * Store \n-     *\n-     * @group SaaS\n-     * @subgroup Pending Users\n-     *\n-     * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n-     */\n+/**\n+ * Store a staged form submission for a given step.\n+ *\n+ * This method validates the request using StepStoreRequest, sets up the service inputs,\n+ * associates the authenticated user, and persists the staged form data.\n+ * Returns a JSON response with the saved staged form or an error response if an exception occurs.\n+ *\n+ * @param  \\Modules\\StagedForm\\Http\\Requests\\StepStoreRequest  $request\n+ * @return \\Illuminate\\Http\\JsonResponse\n+ *\n+ * @throws \\Throwable If any error or exception occurs during processing.\n+ */\n     public function store(StepStoreRequest $request)\n     {\n         try{\n             $this->service\n"
                },
                {
                    "date": 1758631488785,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,31 +25,31 @@\n      */\n     public function get($id)\n     {\n         $this->service\n-            // ->setInput('submitted_form', $request->validated())\n-            // ->setInput('stage_id', $request->get('stage_id'))\n-            // ->setInput('stage_type', 'saas_curator_registration')\n+            ->setInput('stage_type', 'experience_create')\n+            ->setInput('step', $step)\n+            ->setInput('stage_id', $stageId)\n             ->setInput('step', '1')\n             // ->createContact($request->get('email'))\n             ->saveForm()\n             ->collectOutput('stagedForm', $stagedForm);\n \n         // return new StagedForm($stagedForm);\n     }\n \n-/**\n- * Store a staged form submission for a given step.\n- *\n- * This method validates the request using StepStoreRequest, sets up the service inputs,\n- * associates the authenticated user, and persists the staged form data.\n- * Returns a JSON response with the saved staged form or an error response if an exception occurs.\n- *\n- * @param  \\Modules\\StagedForm\\Http\\Requests\\StepStoreRequest  $request\n- * @return \\Illuminate\\Http\\JsonResponse\n- *\n- * @throws \\Throwable If any error or exception occurs during processing.\n- */\n+    /**\n+     * Store a staged form submission for a given step.\n+     *\n+     * This method validates the request using StepStoreRequest, sets up the service inputs,\n+     * associates the authenticated user, and persists the staged form data.\n+     * Returns a JSON response with the saved staged form or an error response if an exception occurs.\n+     *\n+     * @param  \\Modules\\StagedForm\\Http\\Requests\\StepStoreRequest  $request\n+     * @return \\Illuminate\\Http\\JsonResponse\n+     *\n+     * @throws \\Throwable If any error or exception occurs during processing.\n+     */\n     public function store(StepStoreRequest $request)\n     {\n         try{\n             $this->service\n"
                },
                {
                    "date": 1758631495581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function get($id)\n+    public function get()\n     {\n         $this->service\n             ->setInput('stage_type', 'experience_create')\n             ->setInput('step', $step)\n"
                },
                {
                    "date": 1758631519318,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,18 +24,19 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function get()\n     {\n-        $this->service\n+        $step = $request->get('step');\n+        $stageId = $request->get('stage_id');\n+        $getStagedFormDataService\n             ->setInput('stage_type', 'experience_create')\n             ->setInput('step', $step)\n             ->setInput('stage_id', $stageId)\n-            ->setInput('step', '1')\n-            // ->createContact($request->get('email'))\n-            ->saveForm()\n+            ->setAuthUser(Auth::user())\n+            ->getUserStagedFormByStageIdTypeAndStep()\n             ->collectOutput('stagedForm', $stagedForm);\n \n-        // return new StagedForm($stagedForm);\n+        return response()->json($stagedForm);\n     }\n \n     /**\n      * Store a staged form submission for a given step.\n"
                },
                {
                    "date": 1758631529415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,8 +24,9 @@\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n     public function get()\n     {\n+        try{\n         $step = $request->get('step');\n         $stageId = $request->get('stage_id');\n         $getStagedFormDataService\n             ->setInput('stage_type', 'experience_create')\n"
                },
                {
                    "date": 1758631535038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,8 +36,17 @@\n             ->getUserStagedFormByStageIdTypeAndStep()\n             ->collectOutput('stagedForm', $stagedForm);\n \n         return response()->json($stagedForm);\n+        }catch(Throwable $e){\n+            $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n+            return response()->json([\n+                'error' => [\n+                    'message' => $e->getMessage(),\n+                    'code' => $code,\n+                ]\n+            ])->setStatusCode($code);\n+        }\n     }\n \n     /**\n      * Store a staged form submission for a given step.\n"
                },
                {
                    "date": 1758631546174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,22 +22,22 @@\n      * @subgroup Pending Users\n      *\n      * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n      */\n-    public function get()\n+    public function get(Request $request)\n     {\n         try{\n-        $step = $request->get('step');\n-        $stageId = $request->get('stage_id');\n-        $getStagedFormDataService\n-            ->setInput('stage_type', 'experience_create')\n-            ->setInput('step', $step)\n-            ->setInput('stage_id', $stageId)\n-            ->setAuthUser(Auth::user())\n-            ->getUserStagedFormByStageIdTypeAndStep()\n-            ->collectOutput('stagedForm', $stagedForm);\n+            $step = $request->get('step');\n+            $stageId = $request->get('stage_id');\n+            $getStagedFormDataService\n+                ->setInput('stage_type', 'experience_create')\n+                ->setInput('step', $step)\n+                ->setInput('stage_id', $stageId)\n+                ->setAuthUser(Auth::user())\n+                ->getUserStagedFormByStageIdTypeAndStep()\n+                ->collectOutput('stagedForm', $stagedForm);\n \n-        return response()->json($stagedForm);\n+            return response()->json($stagedForm);\n         }catch(Throwable $e){\n             $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n             return response()->json([\n                 'error' => [\n"
                },
                {
                    "date": 1758631559768,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n     {\n         try{\n             $step = $request->get('step');\n             $stageId = $request->get('stage_id');\n-            $getStagedFormDataService\n+            $this->service\n                 ->setInput('stage_type', 'experience_create')\n                 ->setInput('step', $step)\n                 ->setInput('stage_id', $stageId)\n                 ->setAuthUser(Auth::user())\n"
                },
                {
                    "date": 1758631700689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,8 +27,9 @@\n     {\n         try{\n             $step = $request->get('step');\n             $stageId = $request->get('stage_id');\n+                        $stageId = $request->get('stage_id');\n             $this->service\n                 ->setInput('stage_type', 'experience_create')\n                 ->setInput('step', $step)\n                 ->setInput('stage_id', $stageId)\n"
                },
                {
                    "date": 1758631708012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n     {\n         try{\n             $step = $request->get('step');\n             $stageId = $request->get('stage_id');\n-                        $stageId = $request->get('stage_id');\n+            $stageType = $request->get('stage_id');\n             $this->service\n                 ->setInput('stage_type', 'experience_create')\n                 ->setInput('step', $step)\n                 ->setInput('stage_id', $stageId)\n"
                },
                {
                    "date": 1758631714395,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,11 +27,11 @@\n     {\n         try{\n             $step = $request->get('step');\n             $stageId = $request->get('stage_id');\n-            $stageType = $request->get('stage_id');\n+            $stageType = $request->get('stage_type');\n             $this->service\n-                ->setInput('stage_type', 'experience_create')\n+                ->setInput('stage_type', $stageType)\n                 ->setInput('step', $step)\n                 ->setInput('stage_id', $stageId)\n                 ->setAuthUser(Auth::user())\n                 ->getUserStagedFormByStageIdTypeAndStep()\n"
                },
                {
                    "date": 1758631875224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,16 +14,21 @@\n class StagedFormController extends Controller\n {\n     public function __construct(private StagedFormService $service) {}\n \n-    /**\n-     * Saas pending user registration step 1\n-     *\n-     * @group SaaS\n-     * @subgroup Pending Users\n-     *\n-     * @response {\"data\":{\"email\":\"john.doe@example.com\",\"staged_id\":\"ds212213ewrewr\",\"updated_at\":\"2022-12-10T15:25:21.000000Z\",\"created_at\":\"2022-12-10T15:25:21.000000Z\",\"id\":1}}\n-     */\n+ /**\n+ * Retrieve a staged form for the authenticated user based on stage ID, type, and step.\n+ *\n+ * This method accepts request parameters (`stage_id`, `stage_type`, and `step`),\n+ * passes them to the StagedFormService, and fetches the corresponding staged form\n+ * if it belongs to the authenticated user. Returns the staged form as a JSON response\n+ * or an error response if an exception occurs.\n+ *\n+ * @param  \\Illuminate\\Http\\Request  $request\n+ * @return \\Illuminate\\Http\\JsonResponse\n+ *\n+ * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n+ */\n     public function get(Request $request)\n     {\n         try{\n             $step = $request->get('step');\n"
                },
                {
                    "date": 1758631896239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,30 +14,30 @@\n class StagedFormController extends Controller\n {\n     public function __construct(private StagedFormService $service) {}\n \n- /**\n- * Retrieve a staged form for the authenticated user based on stage ID, type, and step.\n- *\n- * This method accepts request parameters (`stage_id`, `stage_type`, and `step`),\n- * passes them to the StagedFormService, and fetches the corresponding staged form\n- * if it belongs to the authenticated user. Returns the staged form as a JSON response\n- * or an error response if an exception occurs.\n- *\n- * @param  \\Illuminate\\Http\\Request  $request\n- * @return \\Illuminate\\Http\\JsonResponse\n- *\n- * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n- */\n+    /**\n+     * Retrieve a staged form for the authenticated user based on stage ID, type, and step.\n+     *\n+     * This method accepts request parameters (`stage_id`, `stage_type`, and `step`),\n+     * passes them to the StagedFormService, and fetches the corresponding staged form\n+     * if it belongs to the authenticated user. Returns the staged form as a JSON response\n+     * or an error response if an exception occurs.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\JsonResponse\n+     *\n+     * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n+     */\n     public function get(Request $request)\n     {\n         try{\n             $step = $request->get('step');\n             $stageId = $request->get('stage_id');\n             $stageType = $request->get('stage_type');\n             $this->service\n                 ->setInput('stage_type', $stageType)\n-                ->setInput('step', $step)\n+                ->setInput('step', $request->get('step'))\n                 ->setInput('stage_id', $stageId)\n                 ->setAuthUser(Auth::user())\n                 ->getUserStagedFormByStageIdTypeAndStep()\n                 ->collectOutput('stagedForm', $stagedForm);\n"
                },
                {
                    "date": 1758631902712,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n             $stageType = $request->get('stage_type');\n             $this->service\n                 ->setInput('stage_type', $stageType)\n                 ->setInput('step', $request->get('step'))\n-                ->setInput('stage_id', $stageId)\n+                ->setInput('stage_id', $request->get('stage_id'))\n                 ->setAuthUser(Auth::user())\n                 ->getUserStagedFormByStageIdTypeAndStep()\n                 ->collectOutput('stagedForm', $stagedForm);\n \n"
                },
                {
                    "date": 1758631910307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,13 +30,10 @@\n      */\n     public function get(Request $request)\n     {\n         try{\n-            $step = $request->get('step');\n-            $stageId = $request->get('stage_id');\n-            $stageType = $request->get('stage_type');\n             $this->service\n-                ->setInput('stage_type', $stageType)\n+                ->setInput('stage_type', $request->get('stage_type'))\n                 ->setInput('step', $request->get('step'))\n                 ->setInput('stage_id', $request->get('stage_id'))\n                 ->setAuthUser(Auth::user())\n                 ->getUserStagedFormByStageIdTypeAndStep()\n"
                },
                {
                    "date": 1758631970487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,15 +30,15 @@\n      */\n     public function get(Request $request)\n     {\n         try{\n-            $this->service\n-                ->setInput('stage_type', $request->get('stage_type'))\n-                ->setInput('step', $request->get('step'))\n-                ->setInput('stage_id', $request->get('stage_id'))\n-                ->setAuthUser(Auth::user())\n-                ->getUserStagedFormByStageIdTypeAndStep()\n-                ->collectOutput('stagedForm', $stagedForm);\n+            $stagedForm = $this->service\n+            ->setAuthUser($request->user())\n+            ->getUserStagedForm(\n+                $request->input('stage_id'),\n+                $request->input('stage_type'),\n+                $request->input('step')\n+            );\n \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n             $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758631987228,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,14 +31,14 @@\n     public function get(Request $request)\n     {\n         try{\n             $stagedForm = $this->service\n-            ->setAuthUser($request->user())\n-            ->getUserStagedForm(\n-                $request->input('stage_id'),\n-                $request->input('stage_type'),\n-                $request->input('step')\n-            );\n+                ->setAuthUser($request->user())\n+                ->getUserStagedForm(\n+                    $request->input('stage_id'),\n+                    $request->input('stage_type'),\n+                    $request->input('step')\n+                );\n \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n             $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758632031400,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,15 +30,15 @@\n      */\n     public function get(Request $request)\n     {\n         try{\n-            $stagedForm = $this->service\n-                ->setAuthUser($request->user())\n-                ->getUserStagedForm(\n-                    $request->input('stage_id'),\n-                    $request->input('stage_type'),\n-                    $request->input('step')\n-                );\n+            $this->service\n+                ->setInput('stage_type', $request->get('stage_type'))\n+                ->setInput('step', $request->get('step'))\n+                ->setInput('stage_id', $request->get('stage_id'))\n+                ->setAuthUser(Auth::user())\n+                ->getUserStagedFormByStageIdTypeAndStep()\n+                ->collectOutput('stagedForm', $stagedForm);\n \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n             $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758632065783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,27 +85,5 @@\n                 ]\n             ])->setStatusCode($code);\n         }\n     }\n-\n-    public function getStagedFormsByUserId(Request $request)\n-    {\n-        $stagedForm = $this->service\n-            ->setAuthUser($request->user())\n-            ->getFormsByUser($request->input('stage_type'), $request->input('step'));\n-\n-        return response()->json(['stagedForm' => $stagedForm]);\n-    }\n-\n-    public function getUserStagedFormByStage(Request $request)\n-    {\n-        $stagedForm = $this->service\n-            ->setAuthUser($request->user())\n-            ->getUserStagedForm(\n-                $request->input('stage_id'),\n-                $request->input('stage_type'),\n-                $request->input('step')\n-            );\n-\n-        return response()->json(['stagedForm' => $stagedForm]);\n-    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758632606115,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n      * @return \\Illuminate\\Http\\JsonResponse\n      *\n      * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n      */\n-    public function get(Request $request)\n+    public function get(StepGetRequest $request)\n     {\n         try{\n             $this->service\n                 ->setInput('stage_type', $request->get('stage_type'))\n"
                },
                {
                    "date": 1758632612781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n use App\\Http\\Controllers\\Controller;\n use Exception;\n use Illuminate\\Http\\Request;\n use Illuminate\\Support\\Facades\\Auth;\n+use Modules\\StagedForm\\app\\Http\\Requests\\StepGetRequest;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Models\\StagedForm;\n use Modules\\StagedForm\\Services\\StagedFormService;\n use Throwable;\n@@ -29,8 +30,9 @@\n      * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n      */\n     public function get(StepGetRequest $request)\n     {\n+        dd($request);\n         try{\n             $this->service\n                 ->setInput('stage_type', $request->get('stage_type'))\n                 ->setInput('step', $request->get('step'))\n"
                },
                {
                    "date": 1758632620387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n      * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n      */\n     public function get(StepGetRequest $request)\n     {\n-        dd($request);\n+        dd($request->validated);\n         try{\n             $this->service\n                 ->setInput('stage_type', $request->get('stage_type'))\n                 ->setInput('step', $request->get('step'))\n"
                },
                {
                    "date": 1758632635533,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,12 +30,12 @@\n      * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n      */\n     public function get(StepGetRequest $request)\n     {\n-        dd($request->validated);\n+        dd($request->validated());\n         try{\n             $this->service\n-                ->setInput('stage_type', $request->get('stage_type'))\n+                ->setInput($request->validated()\n                 ->setInput('step', $request->get('step'))\n                 ->setInput('stage_id', $request->get('stage_id'))\n                 ->setAuthUser(Auth::user())\n                 ->getUserStagedFormByStageIdTypeAndStep()\n"
                },
                {
                    "date": 1758632643162,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,11 +33,9 @@\n     {\n         dd($request->validated());\n         try{\n             $this->service\n-                ->setInput($request->validated()\n-                ->setInput('step', $request->get('step'))\n-                ->setInput('stage_id', $request->get('stage_id'))\n+                ->setInputs($request->validated())\n                 ->setAuthUser(Auth::user())\n                 ->getUserStagedFormByStageIdTypeAndStep()\n                 ->collectOutput('stagedForm', $stagedForm);\n \n"
                },
                {
                    "date": 1758632652180,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,8 @@\n      * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n      */\n     public function get(StepGetRequest $request)\n     {\n-        dd($request->validated());\n         try{\n             $this->service\n                 ->setInputs($request->validated())\n                 ->setAuthUser(Auth::user())\n"
                },
                {
                    "date": 1758634047842,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,15 +39,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n-            return response()->json([\n-                'error' => [\n-                    'message' => $e->getMessage(),\n-                    'code' => $code,\n-                ]\n-            ])->setStatusCode($code);\n+            \n         }\n     }\n \n     /**\n"
                },
                {
                    "date": 1758634056530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,5 +78,7 @@\n                 ]\n             ])->setStatusCode($code);\n         }\n     }\n+\n+    p\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758634064959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,6 +79,8 @@\n             ])->setStatusCode($code);\n         }\n     }\n \n-    p\n+    private function error() : Returntype {\n+        \n+    }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758634070446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,8 +79,8 @@\n             ])->setStatusCode($code);\n         }\n     }\n \n-    private function error() : Returntype {\n+    private function errorResponse() : Returntype {\n         \n     }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758634081536,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n \n use App\\Http\\Controllers\\Controller;\n use Exception;\n use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Arr;\n use Illuminate\\Support\\Facades\\Auth;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepGetRequest;\n use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n use Modules\\StagedForm\\Models\\StagedForm;\n@@ -79,8 +80,9 @@\n             ])->setStatusCode($code);\n         }\n     }\n \n-    private function errorResponse() : Returntype {\n+    private function errorResponse(): Arr\n+    {\n         \n     }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758634090283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,15 @@\n             ])->setStatusCode($code);\n         }\n     }\n \n-    private function errorResponse(): Arr\n+    private function errorResponse($): Arr\n     {\n-        \n+        $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n+            return response()->json([\n+                'error' => [\n+                    'message' => $e->getMessage(),\n+                    'code' => $code,\n+                ]\n+            ])->setStatusCode($code);\n     }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758634096097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n             ])->setStatusCode($code);\n         }\n     }\n \n-    private function errorResponse($): Arr\n+    private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n             return response()->json([\n                 'error' => [\n"
                },
                {
                    "date": 1758634108562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            \n+            $this->errorResponse($e);\n         }\n     }\n \n     /**\n"
                },
                {
                    "date": 1758634116702,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,15 +70,10 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n-            return response()->json([\n-                'error' => [\n-                    'message' => $e->getMessage(),\n-                    'code' => $code,\n-                ]\n-            ])->setStatusCode($code);\n+                        $this->errorResponse($e);\n+\n         }\n     }\n \n     private function errorResponse($e)\n"
                },
                {
                    "date": 1758634130904,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,20 +70,19 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-                        $this->errorResponse($e);\n-\n+            $this->errorResponse($e);\n         }\n     }\n \n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n-            return response()->json([\n-                'error' => [\n-                    'message' => $e->getMessage(),\n-                    'code' => $code,\n-                ]\n-            ])->setStatusCode($code);\n+        return response()->json([\n+            'error' => [\n+                'message' => $e->getMessage(),\n+                'code' => $code,\n+            ]\n+        ])->setStatusCode($code);\n     }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758634171247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            $this->errorResponse($e);\n+            return $this->errorResponse($e);\n         }\n     }\n \n     private function errorResponse($e)\n"
                },
                {
                    "date": 1758634241138,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,9 @@\n                 ->collectOutput('stagedForm', $stagedForm);\n \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            $this->errorResponse($e);\n+            return $this->errorResponse($e);\n         }\n     }\n \n     /**\n@@ -74,8 +74,9 @@\n             return $this->errorResponse($e);\n         }\n     }\n \n+    \n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n         return response()->json([\n"
                },
                {
                    "date": 1758634249397,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,9 +74,11 @@\n             return $this->errorResponse($e);\n         }\n     }\n \n-    \n+    /**\n+     * Handle \n+     */\n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n         return response()->json([\n"
                },
                {
                    "date": 1758634257937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,9 +75,9 @@\n         }\n     }\n \n     /**\n-     * Handle \n+     * Handle error response\n      */\n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758634263531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,8 +76,10 @@\n     }\n \n     /**\n      * Handle error response\n+     * \n+     * \n      */\n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758634272213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,9 +77,9 @@\n \n     /**\n      * Handle error response\n      * \n-     * \n+     * @param \n      */\n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758634289755,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,9 +77,9 @@\n \n     /**\n      * Handle error response\n      * \n-     * @param \n+     * @param  \n      */\n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758634299709,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,9 +77,10 @@\n \n     /**\n      * Handle error response\n      * \n-     * @param  \n+     * @param  Throwable $e\n+     * \n      */\n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758634346218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,9 +78,9 @@\n     /**\n      * Handle error response\n      * \n      * @param  Throwable $e\n-     * \n+     * @return \\Illuminate\\Http\\JsonResponse\n      */\n     private function errorResponse($e)\n     {\n         $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n"
                },
                {
                    "date": 1758780154915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,8 +67,17 @@\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n+            \n+                    //  Check if last step\n+        if ($this->service->isLastStep($stageType, $step)) {\n+            // Gather all staged forms for this stage\n+            $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n+            \n+            // Do your final save, submit to DB, or trigger workflow\n+            $this->service->finalizeProcess($allSteps);\n+        }\n     \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n             return $this->errorResponse($e);\n"
                },
                {
                    "date": 1758780160509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,17 +68,17 @@\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n             \n-                    //  Check if last step\n-        if ($this->service->isLastStep($stageType, $step)) {\n-            // Gather all staged forms for this stage\n-            $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n-            \n-            // Do your final save, submit to DB, or trigger workflow\n-            $this->service->finalizeProcess($allSteps);\n-        }\n-    \n+            //  Check if last step\n+            if ($this->service->isLastStep($stageType, $step)) {\n+                // Gather all staged forms for this stage\n+                $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n+                \n+                // Do your final save, submit to DB, or trigger workflow\n+                $this->service->finalizeProcess($allSteps);\n+            }\n+        \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n             return $this->errorResponse($e);\n         }\n"
                },
                {
                    "date": 1758780242965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n             \n             //  Check if last step\n-            if ($this->service->isLastStep($stageType, $step)) {\n+            if (isLastStep($stageType, $step)) {\n                 // Gather all staged forms for this stage\n                 $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n                 \n                 // Do your final save, submit to DB, or trigger workflow\n"
                },
                {
                    "date": 1758780294868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n             \n             //  Check if last step\n-            if (isLastStep($stageType, $step)) {\n+            if ($this->service->isLastStep($stageType, $step)) {\n                 // Gather all staged forms for this stage\n                 $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n                 \n                 // Do your final save, submit to DB, or trigger workflow\n"
                },
                {
                    "date": 1758780304036,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,8 +58,10 @@\n      * @throws \\Throwable If any error or exception occurs during processing.\n      */\n     public function store(StepStoreRequest $request)\n     {\n+                $stageType = $request->input('stage_type');\n+\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n                 ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758780320538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,10 +58,10 @@\n      * @throws \\Throwable If any error or exception occurs during processing.\n      */\n     public function store(StepStoreRequest $request)\n     {\n-                $stageType = $request->input('stage_type');\n-\n+        $stageType = $request->input('stage_type');\n+        $step = $request->input('step');\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n                 ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758780390820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,12 +73,12 @@\n             \n             //  Check if last step\n             if ($this->service->isLastStep($stageType, $step)) {\n                 // Gather all staged forms for this stage\n-                $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n+                // $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n                 \n-                // Do your final save, submit to DB, or trigger workflow\n-                $this->service->finalizeProcess($allSteps);\n+                // // Do your final save, submit to DB, or trigger workflow\n+                // $this->service->finalizeProcess($allSteps);\n             }\n         \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n"
                },
                {
                    "date": 1758780399399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n-            \n+            dd($this->service->isLastStep($stageType, $step));\n             //  Check if last step\n             if ($this->service->isLastStep($stageType, $step)) {\n                 // Gather all staged forms for this stage\n                 // $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n"
                },
                {
                    "date": 1758780523885,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n                 ->collectOutput('stagedForm', $stagedForm);\n-            dd($this->service->isLastStep($stageType, $step));\n+            // dd($this->service->isLastStep($stageType, $step));\n             //  Check if last step\n             if ($this->service->isLastStep($stageType, $step)) {\n                 // Gather all staged forms for this stage\n                 // $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n"
                },
                {
                    "date": 1758780539923,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,8 +68,9 @@\n                 ->setInput('stage_type', $request->input('stage_type'))\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n+                \n                 ->collectOutput('stagedForm', $stagedForm);\n             // dd($this->service->isLastStep($stageType, $step));\n             //  Check if last step\n             if ($this->service->isLastStep($stageType, $step)) {\n"
                },
                {
                    "date": 1758780551327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,19 +68,12 @@\n                 ->setInput('stage_type', $request->input('stage_type'))\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n-                \n+                ->isLastStep()\n                 ->collectOutput('stagedForm', $stagedForm);\n             // dd($this->service->isLastStep($stageType, $step));\n-            //  Check if last step\n-            if ($this->service->isLastStep($stageType, $step)) {\n-                // Gather all staged forms for this stage\n-                // $allSteps = $this->service->getAllSteps($stageType, $request->get('stage_id'));\n-                \n-                // // Do your final save, submit to DB, or trigger workflow\n-                // $this->service->finalizeProcess($allSteps);\n-            }\n+           \n         \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n             return $this->errorResponse($e);\n"
                },
                {
                    "date": 1758781169970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,8 +69,9 @@\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n                 ->isLastStep()\n+                ->finalizeProcess\n                 ->collectOutput('stagedForm', $stagedForm);\n             // dd($this->service->isLastStep($stageType, $step));\n            \n         \n"
                },
                {
                    "date": 1758904962765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,8 +60,9 @@\n     public function store(StepStoreRequest $request)\n     {\n         $stageType = $request->input('stage_type');\n         $step = $request->input('step');\n+        dd(123);\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n                 ->setInput('stage_id', $request->get('stage_id'))\n@@ -69,9 +70,9 @@\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n                 ->isLastStep()\n-                ->finalizeProcess\n+                ->finalizeProcess()\n                 ->collectOutput('stagedForm', $stagedForm);\n             // dd($this->service->isLastStep($stageType, $step));\n            \n         \n"
                },
                {
                    "date": 1758904975068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,9 +60,8 @@\n     public function store(StepStoreRequest $request)\n     {\n         $stageType = $request->input('stage_type');\n         $step = $request->input('step');\n-        dd(123);\n         try{\n             $this->service\n                 ->setInput('submitted_form', $request->validated())\n                 ->setInput('stage_id', $request->get('stage_id'))\n"
                },
                {
                    "date": 1758905271201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,8 +76,9 @@\n            \n         \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n+            dd($e);\n             return $this->errorResponse($e);\n         }\n     }\n \n"
                },
                {
                    "date": 1759653476437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,9 +76,9 @@\n            \n         \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            dd($e);\n+            dd(123123);\n             return $this->errorResponse($e);\n         }\n     }\n \n"
                },
                {
                    "date": 1759653483092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,9 +76,9 @@\n            \n         \n             return response()->json($stagedForm);\n         }catch(Throwable $e){\n-            dd(123123);\n+            dd($e);\n             return $this->errorResponse($e);\n         }\n     }\n \n"
                },
                {
                    "date": 1759690087499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                 ->setInput('step', $request->input('step'))\n                 ->setAuthUser(Auth::user())\n                 ->saveForm()\n                 ->isLastStep()\n-                ->finalizeProcess()\n+                // ->finalizeProcess()\n                 ->collectOutput('stagedForm', $stagedForm);\n             // dd($this->service->isLastStep($stageType, $step));\n            \n         \n"
                },
                {
                    "date": 1759746539422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,99 @@\n+<?php\n+\n+namespace Modules\\StagedForm\\app\\Http\\Controllers;\n+\n+use App\\Http\\Controllers\\Controller;\n+use Exception;\n+use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Arr;\n+use Illuminate\\Support\\Facades\\Auth;\n+use Modules\\StagedForm\\app\\Http\\Requests\\StepGetRequest;\n+use Modules\\StagedForm\\app\\Http\\Requests\\StepStoreRequest;\n+use Modules\\StagedForm\\Models\\StagedForm;\n+use Modules\\StagedForm\\Services\\StagedFormService;\n+use Throwable;\n+\n+class StagedFormController extends Controller\n+{\n+    public function __construct(private StagedFormService $service) {}\n+\n+    /**\n+     * Retrieve a staged form for the authenticated user based on stage ID, type, and step.\n+     *\n+     * This method accepts request parameters (`stage_id`, `stage_type`, and `step`),\n+     * passes them to the StagedFormService, and fetches the corresponding staged form\n+     * if it belongs to the authenticated user. Returns the staged form as a JSON response\n+     * or an error response if an exception occurs.\n+     *\n+     * @param  \\Illuminate\\Http\\Request  $request\n+     * @return \\Illuminate\\Http\\JsonResponse\n+     *\n+     * @throws \\Throwable If any error or exception occurs during staged form retrieval.\n+     */\n+    public function get(StepGetRequest $request)\n+    {\n+        try{\n+            $this->service\n+                ->setInputs($request->validated())\n+                ->setAuthUser(Auth::user())\n+                ->getUserStagedFormByStageIdTypeAndStep()\n+                ->collectOutput('stagedForm', $stagedForm);\n+\n+            return response()->json($stagedForm);\n+        }catch(Throwable $e){\n+            return $this->errorResponse($e);\n+        }\n+    }\n+\n+    /**\n+     * Store a staged form submission for a given step.\n+     *\n+     * This method validates the request using StepStoreRequest, sets up the service inputs,\n+     * associates the authenticated user, and persists the staged form data.\n+     * Returns a JSON response with the saved staged form or an error response if an exception occurs.\n+     *\n+     * @param  \\Modules\\StagedForm\\Http\\Requests\\StepStoreRequest  $request\n+     * @return \\Illuminate\\Http\\JsonResponse\n+     *\n+     * @throws \\Throwable If any error or exception occurs during processing.\n+     */\n+    public function store(StepStoreRequest $request)\n+    {\n+        try{\n+            $this->service\n+                ->setInput('submitted_form', $request->validated())\n+                ->setInput('stage_id', $request->get('stage_id'))\n+                ->setInput('stage_type', $request->input('stage_type'))\n+                ->setInput('step', $request->input('step'))\n+                ->setAuthUser(Auth::user())\n+                ->saveForm()\n+                ->isLastStep()\n+                // ->finalizeProcess()\n+                ->collectOutput('stagedForm', $stagedForm);\n+            // dd($this->service->isLastStep($stageType, $step));\n+           \n+        \n+            return response()->json($stagedForm);\n+        }catch(Throwable $e){\n+            dd($e);\n+            return $this->errorResponse($e);\n+        }\n+    }\n+\n+    /**\n+     * Handle error response\n+     * \n+     * @param  Throwable $e\n+     * @return \\Illuminate\\Http\\JsonResponse\n+     */\n+    private function errorResponse($e)\n+    {\n+        $code = ($e->getCode() != 0) ? $e->getCode() : 500;\n+        return response()->json([\n+            'error' => [\n+                'message' => $e->getMessage(),\n+                'code' => $code,\n+            ]\n+        ])->setStatusCode($code);\n+    }\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1758615395967,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace Modules\\StagedForm\\Http\\Controllers;\n\nuse App\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\n\nclass StagedFormController extends Controller\n{\n    public function __construct(private StagedFormService $service) {}\n\n    public function getStagedFormsByUserId(Request $request)\n    {\n        $stagedForm = $this->service\n            ->setAuthUser($request->user())\n            ->getFormsByUser($request->input('stage_type'), $request->input('step'));\n\n        return response()->json(['stagedForm' => $stagedForm]);\n    }\n\n    public function getUserStagedFormByStage(Request $request)\n    {\n        $stagedForm = $this->service\n            ->setAuthUser($request->user())\n            ->getUserStagedForm(\n                $request->input('stage_id'),\n                $request->input('stage_type'),\n                $request->input('step')\n            );\n\n        return response()->json(['stagedForm' => $stagedForm]);\n    }\n}"
        }
    ]
}